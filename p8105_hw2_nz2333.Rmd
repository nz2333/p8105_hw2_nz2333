---
title: "p8105_h2_nz2333"
author: "nz2333"
date: "10/9/2021"
output: github_document
---

```{r}
library(tidyverse)
library(readxl)

```

## Question 1 
_Read and clean data_


trash_df = read_excel("./Trash-Wheel-Collection-Totals-7-2020-2.xlsx")


unable to import excel file to r studio. already emailed TA Margaret. 

## Question 2
_Part one_
```{r}
pols_month_df = read.csv("./data/pols-month.csv")
```

```{r}
pols_month_df2 = separate(pols_month_df, mon, c("Year", "Month", "Date")) %>%
  select(-"Date")
```

```{r}
pols_month_df2 = pols_month_df2 %>% 
    mutate(Month = month.name[as.integer(Month)], 
           Year = as.integer(Year))
```

```{r}
pols_month_df2 = pols_month_df2 %>%
    mutate(
      president = case_when(prez_dem == 1 ~ "dem", prez_gop == 1 ~ "gop"
                            )) %>%
select(-c("prez_dem", "prez_gop"))
```

_Part Two_
```{r}
snp_df = read.csv("./data/snp.csv")
```

```{r}
snp_df2 = separate(snp_df, date, c("Month", "Date", "Year")) %>%
  select(-"Date")
```

```{r}
snp_df2 = snp_df2 %>%
  mutate(Month = month.name[as.integer(Month)], 
        Year = as.integer(Year))
```
```{r}
snp_df2 = snp_df2 %>%
  mutate(Year = ifelse(Year<= 15, Year+2000, Year+1900))
```

```{r}
snp_df2 = snp_df2 %>% select (Year, Month, close)
```

_Part three_
```{r}
unemploy_df = read.csv("./data/unemployment.csv")
```

```{r}
unemploy_df2 = pivot_longer(unemploy_df, Jan:Dec,
                            names_to = "Month",
                            values_to = "Unemployment Rate") %>%
              mutate(Year = as.integer(Year))
```

*Merging three data files
```{r} 
merged1_df = left_join(pols_month_df2, snp_df2, by=c("Year", "Month")
)
```
```{r}
merged2_df = left_join(merged1_df, unemploy_df2, by=c("Year", "Month")
)
```

///Description on datasets///
1. The cleaned data set pols_month_df2 has 822 observations and 9 variables. 
The year range is from 1947-2015. 
Key variables include: Year, Month, President. 

2. The cleaned data set snp_df2 has 787 observations and 3 variables. 
The year range is from 1950-2015. 
Key variables include: Year, Month, close. 

3. The cleaned data set unemploy_df2 has 816 observations and 3 variables. 
The year range is from 1948-2015. 
Key variables include: Year, Month, Unemployment rate. 

4. The final merged data set merged2_df has 822 observations and 11 variables. 
The year range is from 1947-2015. 
Key variables include: Year, Month, President, close, Unemployment rate. 





